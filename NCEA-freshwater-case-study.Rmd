#Using the River Surveillance Network dataset

```{r}
library(terra)
library(raster)
library(sf)
library(dplyr)
library(tidyr)
```


```{r}
#Read in sampling points of RSN

#Can't get access to whole dataset so just use example dataset for now:

RSN_sites_example <- st_read("/home/amy.gresham@defra.gov.uk/ncea-species-abundance/Data/RSN_2024_latlon_coords_XYTableToPoint_ExportFeatures.shp")

#Open combined Living England 2022-2023 raster

LE <- raster( "/dbfs/mnt/lab/unrestricted/amy.gresham@defra.gov.uk/Living_England_2022_2023_whole_raster.tif")
crs(LE) <- 27700 # british national grid

#Project LE to match RSN sites
RSN_sites_example_proj <- st_transform(RSN_sites_example, crs(LE))

plot(LE)
plot(RSN_sites_example_proj$geometry,add=TRUE)
```

```{r}
#Read in Water Framework Directive surface water operational catchments

# Path to the GDB file
gdb_path <- "/home/amy.gresham@defra.gov.uk/ncea-species-abundance/Data/Water_Framework_Directive_WFD_Surface_Water_Operational_Catchments_Cycle_3.gdb"

# List all layers in the GDB
layers <- st_layers(gdb_path)
print(layers)
print(layers$name)

# Read a specific layer from the GDB
op_catch <- st_read(dsn = gdb_path, layer = layers$name)

plot(LE)
plot(op_catch$shape,add=TRUE)
plot(RSN_sites_example_proj$geometry,add=TRUE)